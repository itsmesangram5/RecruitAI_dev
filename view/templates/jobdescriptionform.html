<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Description</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/jobdescriptionform.css')}}" />

    <script src="https://kit.fontawesome.com/76051b1a44.js" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
   
</head>
<body class="contain">
    <nav id="navbar-example15" class="navbar sticky-top bg-dark border-bottom border-body " data-bs-theme="dark">
        <a class="navbar-brand" href="#">
            <span style="font-size: 30px; margin-left: 20px;" class="homepagetxt">RecruitAI</span>
        </a>
        <a style="font-weight: bold; font-size: 25px; letter-spacing: 0.1cap;" class="navbar-brand"></a>
        <ul class="nav nav-pills">
            <li class="nav-item dropdown">
                <a style="font-size: 20px;color: whitesmoke;" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"> <i style="padding-right: 7px;" class="fa-regular fa-user"></i>RecruiterName</a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/recruiter">Home</a></li>
                    <li><a class="dropdown-item" href="#">Edit Profile</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#scrollspyHeading5"><i style="padding-right: 4px;" class="fa-solid fa-right-from-bracket"></i>Logout</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <div style="background-color: rgb(255, 255, 255); " class="centered-div">
        <div class="left-part">
          <span style="font-size: 25px; border-left: 5px solid red; font-weight: 400;padding: 6px;">Job Description</span>
            
            <img style="margin-top: 27%;" src="../static/images/jobdescriptionemployee.png" alt="Image">
        </div>
        <div class="right-part">
            <form id="jobForm" class="row g-3">
                    <div class="col-12">
                        <label for="companyName" class="form-label">Company Name</label>
                        <input type="text" class="form-control" id="companyName" name="company_name" placeholder="Enter Company Name" value="Tech Solutions Inc">
                    </div>
                    <div class="col-12">
                        <label for="jobTitle" class="form-label">Job Title</label>
                        <input type="text" class="form-control" id="jobTitle" name="job_title" placeholder="Enter job title" value="Software Engineer">
                    </div>
                    <div >
                        <label for="jobdescription " class="form-label">Job Description Overview</label>
                        <input type="text" class="form-control" rows="3" id="job_desripation" name="job_desripation" placeholder="Enter Overview of job description" value="Sample Job Description">
                    </div>
                    <div class="col-md-6">
                        <label for="branch" class="form-label">Branch</label>
                        <input type="text" class="form-control" id="branch" name="branch" placeholder="Engineering Branch" value="Computer Science">
                    </div>
                    <div class="col-md-6">
                        <label for="passoutYear" class="form-label">Passout Year</label>
                        <input type="text" class="form-control" id="passoutYear" name="passout_yr" placeholder="Passout year of candidate" value="2022">
                    </div>
                    <div class="col-md-6">
                        <label for="marks10" class="form-label">10th Marks</label>
                        <input type="text" class="form-control" id="marks10" name="marks_10" placeholder="10th Percentage criteria" value="85.50">
                    </div>
                    <div class="col-md-6">
                        <label for="marks12" class="form-label">12th Marks</label>
                        <input type="text" class="form-control" id="marks12" name="marks_12" placeholder="12th Percentage criteria" value="90.00">
                    </div>
                    <div class="col-md-6">
                        <label for="marksEngg" class="form-label">Engineering Aggregate</label>
                        <input type="text" class="form-control" id="marksEngg" name="marks_engg" placeholder="Engineering Aggregate criteria" value="8.75">
                    </div>
                    <div class="col-12">
                        <label for="expTitle" class="form-label">Experience Title</label>
                        <input type="text" class="form-control" id="expTitle" name="exp_title" placeholder="Required Experience" value="Software Developer">
                    </div>
                    <div class="col-12">
                        <label for="expTech" class="form-label">Technical Experience</label>
                        <input type="text" class="form-control" id="expTech" name="exp_tech" placeholder="Technical Experience" value="Python, JavaScript">
                    </div>
                    <div class="col-12">
                        <label for="projectTech" class="form-label">Required Project tech of applicant</label>
                        <input type="text" class="form-control" id="projectTech" name="project_tech" placeholder="Enter project tech" value="Django, React">
                    </div>
                    <div class="col-12">
                        <label for="techSkills" class="form-label">Technical Skills</label>
                        <input type="text" class="form-control" id="techSkills" name="tech_skills" placeholder="Technical Skills" value="Backend Development, Frontend Development">
                    </div>
                    <div class="col-12">
                        <label for="softSkills" class="form-label">Soft Skills</label>
                        <input type="text" class="form-control" id="softSkills" name="soft_skills" placeholder="Required soft skill for job role" value="Communication, Problem-solving">
                    </div>
                    <div class="col-md-4">
                        <label for="ctc" class="form-label">Expected CTC</label>
                        <input type="text" class="form-control" id="ctc" name="ctc" placeholder="INR." value="800">
                    </div>
                    <div class="col-md-4">
                        <label for="positions" class="form-label">Position</label>
                        <input type="number" class="form-control" id="positions" name="positions" placeholder="Enter No. Position" value="5">
                    </div>
                    <div class="col-md-4">
                        <label for="lastDate" class="form-label">Last date to apply</label>
                        <input type="date" class="form-control" id="lastDate" name="last_date_to_apply" value="2024-05-01">
                    </div>
                    <div class="input-group mb-3">
                        <input type="file" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload" required>
                        <button class="btn btn-success" type="button" id="inputGroupFileAddon04">Upload JD</button>
                        <div class="invalid-feedback">Please upload the job description file.</div>
                    </div>
                    
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                    <div id="successMessage" class="alert alert-success" style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
                        Your job description has been successfully saved.
                    </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('jobForm');
            form.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission
                const formData = new FormData(form);
                const jsonObject = {};
                formData.forEach((value, key) => {
                    jsonObject[key] = value;
                });
                // Get the token from session storage
                const token = sessionStorage.getItem('tokenData');
                if (!token) {
                    console.error('Authorization token not found.');
                    return;
                }
                fetch('/addjobbyrec_id', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(jsonObject)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                console.log(data);
                // Show success message
                successMessage.style.display = 'block';
                setTimeout(function() {
                    successMessage.style.display = 'none';
                }, 5000); // Hide message after 5 seconds
            })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                });
            });
        });
    </script>
</body>
</html>
